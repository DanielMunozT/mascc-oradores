<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title><script>document.write(T.title)</script></title>
  
<style>
  body {
    font-family: sans-serif;
    margin: 1em;
    max-width: 600px;
    padding: 0 1em;
    line-height: 1.6;
  }
  input, button {
    font-size: 1em;
    padding: 0.5em;
    margin-top: 0.5em;
    width: 100%;
    box-sizing: border-box;
  }
  button {
    background-color: #007bff;
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 6px;
  }
  button:hover {
    background-color: #0056b3;
  }
  h1 {
    font-size: 1.4em;
    margin-bottom: 0.5em;
  }
  ul {
    padding-left: 1.2em;
  }
  li {
    margin: 0.5em 0;
  }
  @media (min-width: 768px) {
    input, button {
      width: auto;
    }
  }
</style>

  <script>
let langParam = new URLSearchParams(window.location.search).get('lang');
let browserLang = (navigator.language || 'en').slice(0, 2).toLowerCase();
const LANG = ['en', 'es', 'pt'].includes((langParam || browserLang)) ? (langParam || browserLang) : 'en';
const T = {};
function setLanguageStrings(translations) {
  for (const [key, value] of Object.entries(translations[LANG] || translations['en'])) {
    T[key] = value;
  }
}
const translations = {"en": {"title": "MASCC Course Scheduler", "home": "Home", "list": "\ud83d\udccb List of Speakers & Calendars", "availability": "\ud83d\udcc5 Check Availability by Date", "teaching": "\u23f0 Who's Teaching at a Specific Time", "select_date": "Select date:", "select_time": "Select time:", "check": "Check", "loading": "Loading...", "available": "AVAILABLE", "not_teaching": "NOT teaching at that time", "teaching_now": "TEACHING NOW", "is_teaching": "is TEACHING:", "is_available": "is AVAILABLE"}, "es": {"title": "Programador de Cursos MASCC", "home": "Inicio", "list": "\ud83d\udccb Lista de Ponentes y Calendarios", "availability": "\ud83d\udcc5 Ver Disponibilidad por Fecha", "teaching": "\u23f0 Qui\u00e9n Est\u00e1 Ense\u00f1ando en un Momento", "select_date": "Seleccionar fecha:", "select_time": "Seleccionar hora:", "check": "Verificar", "loading": "Cargando...", "available": "DISPONIBLE", "not_teaching": "NO est\u00e1 ense\u00f1ando en ese momento", "teaching_now": "ENSE\u00d1ANDO AHORA", "is_teaching": "est\u00e1 ENSE\u00d1ANDO:", "is_available": "est\u00e1 DISPONIBLE"}, "pt": {"title": "Agendador de Cursos MASCC", "home": "In\u00edcio", "list": "\ud83d\udccb Lista de Palestrantes e Calend\u00e1rios", "availability": "\ud83d\udcc5 Ver Disponibilidade por Data", "teaching": "\u23f0 Quem Est\u00e1 Ensinando em um Hor\u00e1rio", "select_date": "Selecionar data:", "select_time": "Selecionar hor\u00e1rio:", "check": "Verificar", "loading": "Carregando...", "available": "DISPON\u00cdVEL", "not_teaching": "N\u00c3O est\u00e1 ensinando nesse hor\u00e1rio", "teaching_now": "ENSINANDO AGORA", "is_teaching": "est\u00e1 ENSINANDO:", "is_available": "est\u00e1 DISPON\u00cdVEL"}};
setLanguageStrings(translations);
</script>
</head>
<body id="speakers">

<div style="margin-bottom: 1em;">
  <label for="lang-select">üåê Language: </label>
  <select id="lang-select" onchange="changeLang(this.value)">
    <option value="en">English</option>
    <option value="es">Espa√±ol</option>
    <option value="pt">Portugu√™s</option>
  </select>
</div>
<script>
  function changeLang(lang) {
    const url = new URL(window.location.href);
    url.searchParams.set('lang', lang);
    window.location.href = url.toString();
  }
  window.addEventListener("DOMContentLoaded", () => {
    document.getElementById('lang-select').value = LANG;
  });
</script>


<h1><script>document.write(T.list)</script></h1>
<ul id="speakerList"></ul>
<script>
  fetch('speakers.json')
    .then(res => res.json())
    .then(data => {
      const ul = document.getElementById('speakerList');
      data.forEach(speaker => {
        const name = `<strong>${speaker.name}</strong>`;
        const calendar = `<a href="${speaker.calendarUrl}" target="_blank">View Calendar</a>`;
        const location = speaker.location ? `<br/>üìç ${speaker.location}` : "";
        const langs = speaker.languages ? `<br/>üó£Ô∏è ${speaker.languages.join(', ')}` : "";
        const requestLink = `<br/><a href="https://docs.google.com/forms/d/e/1FAIpQLSf_fake_form_id/viewform?usp=pp_url&entry.1234567890=${encodeURIComponent(speaker.name)}" target="_blank">üì® Request this speaker</a>`;
        const li = document.createElement('li');
        li.innerHTML = `${name} ‚Äì ${calendar}${location}${langs}${requestLink}`;
        ul.appendChild(li);
      });
    });
</script>

</body>
</html>